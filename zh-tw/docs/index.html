<!doctype html>
<html lang="zh-tw" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.54.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="https://gin-gonic.com/zh-tw/docs/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x196.png" sizes="96x196">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png"sizes="192x192">

<title>文檔 | Gin Web Framework</title><meta property="og:title" content="文檔" />
<meta property="og:description" content="Gin Web Framework" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://gin-gonic.com/zh-tw/docs/" />

<meta property="og:updated_time" content="2019-02-21T14:22:47&#43;08:00"/><meta property="og:site_name" content="Gin Web Framework" />

<meta itemprop="name" content="文檔">
<meta itemprop="description" content="Gin Web Framework">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="文檔"/>
<meta name="twitter:description" content="Gin Web Framework"/>





<link rel="preload" href="/scss/main.min.397589ac262831fa6dd4eb5f7daea1140a381d982abddabfeefab2fbf5645fe0.css" as="style">
<link href="/scss/main.min.397589ac262831fa6dd4eb5f7daea1140a381d982abddabfeefab2fbf5645fe0.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

    <title>文檔 | Gin Web Framework</title>
  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
	<a class="navbar-brand" href="/zh-tw/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"/> </span><span class="text-uppercase font-weight-bold">Gin Web Framework</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link active" href="/zh-tw/docs/"><span class="active">文檔</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				<a class="nav-link" href="https://github.com/gin-gonic"><span>GitHub</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				<a class="nav-link" href="https://github.com/gin-contrib"><span>Middleware</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	繁體中文
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/docs/">English</a>
	
	<a class="dropdown-item" href="/ja/docs/">日本語</a>
	
	<a class="dropdown-item" href="/zh-cn/docs/">简体中文</a>
	
</div>
			</li>
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
 <input type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    <div class="nav-item dropdown d-block d-lg-none">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	繁體中文
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/docs/">English</a>
	
	<a class="dropdown-item" href="/ja/docs/">日本語</a>
	
	<a class="dropdown-item" href="/zh-cn/docs/">简体中文</a>
	
</div>
    </div>
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">文檔</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/introduction/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Introduction</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-introduction">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/quickstart/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Quickstart</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-quickstart">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/benchmarks/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Benchmarks</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-benchmarks">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/features/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Features</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-features">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/jsoniter/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Jsoniter</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-jsoniter">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/examples/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Examples</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-examples">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/examples/upload-file/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Upload files</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-examples-upload-file">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-upload-file-multiple-file" href="/zh-tw/docs/examples/upload-file/multiple-file/">Multiple files</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-upload-file-single-file" href="/zh-tw/docs/examples/upload-file/single-file/">Single file</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-ascii-json" href="/zh-tw/docs/examples/ascii-json/">AsciiJSON</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-bind-uri" href="/zh-tw/docs/examples/bind-uri/">Bind Uri</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-bind-form-data-request-with-custom-struct" href="/zh-tw/docs/examples/bind-form-data-request-with-custom-struct/">Bind form-data request with custom struct</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-bind-html-checkbox" href="/zh-tw/docs/examples/bind-html-checkbox/">Bind html checkboxes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-bind-query-or-post" href="/zh-tw/docs/examples/bind-query-or-post/">Bind query string or post data</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-bind-single-binary-with-template" href="/zh-tw/docs/examples/bind-single-binary-with-template/">Build a single binary with templates</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-custom-http-config" href="/zh-tw/docs/examples/custom-http-config/">Custom HTTP configuration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-custom-middleware" href="/zh-tw/docs/examples/custom-middleware/">Custom Middleware</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-custom-validators" href="/zh-tw/docs/examples/custom-validators/">Custom validators</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-define-format-for-the-log-of-routes" href="/zh-tw/docs/examples/define-format-for-the-log-of-routes/">Define format for the log of routes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-goroutines-inside-a-middleware" href="/zh-tw/docs/examples/goroutines-inside-a-middleware/">Goroutines inside a middleware</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-graceful-restart-or-stop" href="/zh-tw/docs/examples/graceful-restart-or-stop/">Graceful restart or stop</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-grouping-routes" href="/zh-tw/docs/examples/grouping-routes/">Grouping routes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-html-rendering" href="/zh-tw/docs/examples/html-rendering/">HTML rendering</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-http2-server-push" href="/zh-tw/docs/examples/http2-server-push/">HTTP2 server push</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-write-log" href="/zh-tw/docs/examples/write-log/">How to write log file</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-jsonp" href="/zh-tw/docs/examples/jsonp/">JSONP</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-map-as-querystring-or-postform" href="/zh-tw/docs/examples/map-as-querystring-or-postform/">Map as querystring or postform parameters</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-binding-and-validation" href="/zh-tw/docs/examples/binding-and-validation/">Model binding and validation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-multipart-urlencoded-binding" href="/zh-tw/docs/examples/multipart-urlencoded-binding/">Multipart/Urlencoded binding</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-multipart-urlencoded-form" href="/zh-tw/docs/examples/multipart-urlencoded-form/">Multipart/Urlencoded form</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-multiple-template" href="/zh-tw/docs/examples/multiple-template/">Multitemplate</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-only-bind-query-string" href="/zh-tw/docs/examples/only-bind-query-string/">Only bind query string</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-param-in-path" href="/zh-tw/docs/examples/param-in-path/">Parameters in path</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-pure-json" href="/zh-tw/docs/examples/pure-json/">PureJSON</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-query-and-post-form" href="/zh-tw/docs/examples/query-and-post-form/">Query and post form</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-querystring-param" href="/zh-tw/docs/examples/querystring-param/">Query string parameters</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-redirects" href="/zh-tw/docs/examples/redirects/">Redirects</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-run-multiple-service" href="/zh-tw/docs/examples/run-multiple-service/">Run multiple service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-secure-json" href="/zh-tw/docs/examples/secure-json/">SecureJSON</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-serving-data-from-reader" href="/zh-tw/docs/examples/serving-data-from-reader/">Serving data from reader</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-serving-static-files" href="/zh-tw/docs/examples/serving-static-files/">Serving static files</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-cookie" href="/zh-tw/docs/examples/cookie/">Set and get a cookie</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-support-lets-encrypt" href="/zh-tw/docs/examples/support-lets-encrypt/">Support Let&#39;s Encrypt</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-bind-body-into-dirrerent-structs" href="/zh-tw/docs/examples/bind-body-into-dirrerent-structs/">Try to bind body into different structs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-using-basicauth-middleware" href="/zh-tw/docs/examples/using-basicauth-middleware/">Using BasicAuth middleware</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-http-method" href="/zh-tw/docs/examples/http-method/">Using HTTP method</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-using-middleware" href="/zh-tw/docs/examples/using-middleware/">Using middleware</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-without-middleware" href="/zh-tw/docs/examples/without-middleware/">Without middleware by default</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-zh-tw-docs-examples-rendering" href="/zh-tw/docs/examples/rendering/">XML/JSON/YAML/ProtoBuf rendering</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/testing/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Testing</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-testing">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/users/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Users</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-users">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/zh-tw/docs/faq/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>
    <li class="collapse show" id="zh-tw-docs-faq">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            


<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">


<a href="https://github.com/gin-gonic/website/edit/master/content/zh-tw/docs/_index.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/gin-gonic/website/issues/new?title=%e6%96%87%e6%aa%94" target="_blank"><i class="fab fa-github fa-fw"></i> Create issue</a>
</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#安装">安装</a>
<ul>
<li><a href="#使用-govendor-https-github-com-kardianos-govendor-工具创建项目">使用 <a href="https://github.com/kardianos/govendor" target="_blank">Govendor</a> 工具创建项目</a></li>
</ul></li>
<li><a href="#前提条件">前提条件</a></li>
<li><a href="#快速开始">快速开始</a></li>
<li><a href="#性能测试">性能测试</a></li>
<li><a href="#gin-v1-稳定版">Gin v1 稳定版</a></li>
<li><a href="#使用-jsoniter-https-github-com-json-iterator-go">使用 <a href="https://github.com/json-iterator/go" target="_blank">jsoniter</a></a></li>
<li><a href="#api-示例">API 示例</a>
<ul>
<li><a href="#使用get-post-put-patch-delete-options">使用GET, POST, PUT, PATCH, DELETE , OPTIONS</a></li>
<li><a href="#获取路由参数">获取路由参数</a></li>
<li><a href="#获取url查询参数">获取url查询参数</a></li>
<li><a href="#multipart-urlencoded-表单">Multipart Urlencoded 表单</a></li>
<li><a href="#获取post表单数据-url带查询参数">获取post表单数据(url带查询参数)</a></li>
<li><a href="#映射参数-表单参数">映射参数 表单参数</a></li>
<li><a href="#上传文件">上传文件</a>
<ul>
<li><a href="#单个文件上传">单个文件上传</a></li>
<li><a href="#多文件上传">多文件上传</a></li>
</ul></li>
<li><a href="#路由组">路由组</a></li>
<li><a href="#默认初始化-gin">默认初始化 Gin</a></li>
<li><a href="#使用中间件">使用中间件</a></li>
<li><a href="#如何记录日志">如何记录日志</a></li>
<li><a href="#模型绑定和验证">模型绑定和验证</a></li>
<li><a href="#自定义验证器">自定义验证器</a></li>
<li><a href="#只绑定url查询参数">只绑定url查询参数</a></li>
<li><a href="#url查询参数或表单数据绑定到结构体">url查询参数或表单数据绑定到结构体</a></li>
<li><a href="#url路径参数绑定">url路径参数绑定</a></li>
<li><a href="#绑定-html-复选框">绑定 HTML 复选框</a></li>
<li><a href="#multipart-urlencoded-绑定">Multipart Urlencoded 绑定</a></li>
<li><a href="#xml-json-yaml-protobuf-渲染">XML JSON YAML ProtoBuf 渲染</a>
<ul>
<li><a href="#securejson">SecureJSON</a></li>
<li><a href="#jsonp">JSONP</a></li>
<li><a href="#asciijson">AsciiJSON</a></li>
<li><a href="#purejson">PureJSON</a></li>
</ul></li>
<li><a href="#静态文件服务">静态文件服务</a></li>
<li><a href="#从-reader-读取数据">从 reader 读取数据</a></li>
<li><a href="#html-渲染">HTML 渲染</a>
<ul>
<li><a href="#自定义模板渲染器">自定义模板渲染器</a></li>
<li><a href="#自定义分隔符">自定义分隔符</a></li>
<li><a href="#自定义模板功能">自定义模板功能</a></li>
</ul></li>
<li><a href="#多模板">多模板</a></li>
<li><a href="#重定向">重定向</a></li>
<li><a href="#自定义中间件">自定义中间件</a></li>
<li><a href="#basicauth-中间件">BasicAuth() 中间件</a></li>
<li><a href="#在中间件中使用goroutines">在中间件中使用Goroutines</a></li>
<li><a href="#自定义-http-配置">自定义 HTTP 配置</a></li>
<li><a href="#let-s-encrypt-支持">Let&rsquo;s Encrypt 支持</a></li>
<li><a href="#使用-gin-运行多个服务">使用 Gin 运行多个服务</a></li>
<li><a href="#优雅重启或停止">优雅重启或停止</a></li>
<li><a href="#静态资源嵌入">静态资源嵌入</a></li>
<li><a href="#表单数据绑定到自定义结构体">表单数据绑定到自定义结构体</a></li>
<li><a href="#将request-body绑定到不同的结构体中">将request body绑定到不同的结构体中</a></li>
<li><a href="#http2-server-推送">http2 server 推送</a></li>
<li><a href="#定义路由日志的格式">定义路由日志的格式</a></li>
<li><a href="#如何使用cookie">如何使用Cookie</a></li>
</ul></li>
<li><a href="#测试">测试</a></li>
<li><a href="#用户">用户</a></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://gin-gonic.com/zh-tw/docs/">文檔</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>文檔</h1>
	
	

<p><img align="right" width="159px" src="https://raw.githubusercontent.com/gin-gonic/logo/master/color.png"></p>

<p>Gin 是一个 Go (Golang) 语言框架。 它是一个拥有更好性能的 martini-like API 框架, 比 <a href="https://github.com/julienschmidt/httprouter" target="_blank">httprouter</a> 的速度快了40倍. 如果你是性能和高效的追求者, 那么你会爱上 Gin.</p>

<p><img src="https://gin-gonic.github.io/gin/other/console.png" alt="Gin console logger" /></p>

<h2 id="contents">Contents</h2>

<ul>
<li><a href="#安装">安装</a></li>
<li><a href="#前提条件">前提条件</a></li>
<li><a href="#快速开始">快速开始</a></li>
<li><a href="#性能测试">性能测试</a></li>
<li><a href="#gin-v1-稳定版">Gin v1 稳定版</a></li>
<li><a href="#使用-jsoniter">使用 jsoniter </a></li>
<li><a href="#api-示例">API 示例</a>

<ul>
<li><a href="#get-post-put-patch-delete-options-使用">GET,POST,PUT,PATCH,DELETE,OPTIONS 使用</a></li>
<li><a href="#获取路由参数">获取路由参数</a></li>
<li><a href="#获取url查询参数">获取url查询参数</a></li>
<li><a href="#multipart-urlencoded-表单">Multipart Urlencoded 表单</a></li>
<li><a href="#获取post表单数据url带查询参数">获取post表单数据（url带查询参数）</a></li>
<li><a href="#映射参数-表单参数">映射参数 表单参数</a></li>
<li><a href="#上传文件">上传文件</a></li>
<li><a href="#路由组">路由组</a></li>
<li><a href="#默认初始化-gin">默认初始化 Gin</a></li>
<li><a href="#使用中间件">使用中间件</a></li>
<li><a href="#如何记录日志">如何记录日志</a></li>
<li><a href="#模型绑定和验证">模型绑定和验证</a></li>
<li><a href="#自定义验证器">自定义验证器</a></li>
<li><a href="#只绑定url查询参数">只绑定url查询参数</a></li>
<li><a href="#url查询参数或表单数据绑定到结构体">url查询参数或表单数据绑定到结构体</a></li>
<li><a href="#url路径参数绑定">url路径参数绑定</a></li>
<li><a href="#绑定-html-复选框">绑定 HTML 复选框</a></li>
<li><a href="#multipart-urlencoded-绑定">Multipart Urlencoded 绑定</a></li>
<li><a href="#xml-json-yaml-protobuf-渲染">XML JSON YAML ProtoBuf 渲染</a></li>
<li><a href="#SecureJSON">SecureJSON</a></li>
<li><a href="#静态文件服务">静态文件服务</a></li>
<li><a href="#从-reader-读取数据">从reader 读取数据</a></li>
<li><a href="#html-渲染">HTML 渲染</a></li>
<li><a href="#多模板">多模板</a></li>
<li><a href="#重定向">重定向</a></li>
<li><a href="#自定义中间件">自定义中间件</a></li>
<li><a href="#使用-basicauth()-中间件">使用 BasicAuth() 中间件</a></li>
<li><a href="#在中间件中使用Goroutines">在中间件中使用Goroutines</a></li>
<li><a href="#自定义-http-配置">自定义 HTTP 配置</a></li>
<li><a href="#lets-encrypt-支持">Let&rsquo;s Encrypt 支持</a></li>
<li><a href="使用-gin-运行多个服务" target="_blank">使用 Gin 运行多个服务</a></li>
<li><a href="#优雅重启或停止">优雅重启或停止</a></li>
<li><a href="#静态资源嵌入">静态资源嵌入</a></li>
<li><a href="#表单数据绑定到自定义结构体">表单数据绑定到自定义结构体</a></li>
<li><a href="#将request-body绑定到不同的结构体中">将request body绑定到不同的结构体中</a></li>
<li><a href="#http2-server-推送">http2 server 推送</a></li>
<li><a href="#定义路由日志的格式">定义路由日志的格式</a></li>
<li><a href="#如何使用Cookie">如何使用Cookie</a></li>
</ul></li>
<li><a href="#测试">测试</a></li>
<li><a href="#用户">用户</a></li>
</ul>

<h2 id="安装">安装</h2>

<p>要安装 Gin 软件包，需要先安装 Go 并设置 Go 工作区。</p>

<ol>
<li>下载并安装 gin:</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go get -u github.com/gin-gonic/gin</code></pre></div>
<ol>
<li>将 gin 引入到代码中:</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span></code></pre></div>
<ol>
<li>（可选）如果使用诸如<code>http.StatusOK</code>之类的常量，则需要引入 <code>net/http</code> 包。</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;net/http&#34;</span></code></pre></div>
<h3 id="使用-govendor-https-github-com-kardianos-govendor-工具创建项目">使用 <a href="https://github.com/kardianos/govendor" target="_blank">Govendor</a> 工具创建项目</h3>

<ol>
<li><code>go get</code> govendor</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go get github.com/kardianos/govendor</code></pre></div>
<p>2.创建项目并且 <code>cd</code> 到项目目录中</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir -p <span style="color:#000">$GOPATH</span>/src/github.com/myusername/project <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#204a87">cd</span> <span style="color:#4e9a06">&#34;</span><span style="color:#000">$_</span><span style="color:#4e9a06">&#34;</span></code></pre></div>
<ol>
<li>使用 govendor 初始化项目,并且引入gin</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ govendor init
$ govendor fetch github.com/gin-gonic/gin@v1.3</code></pre></div>
<ol>
<li>复制启动文件模板到项目目录中</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl https://raw.githubusercontent.com/gin-gonic/gin/master/examples/basic/main.go &gt; main.go</code></pre></div>
<p>5.启动项目</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go run main.go</code></pre></div>
<h2 id="前提条件">前提条件</h2>

<p>新版本的 Gin 需要 Go 1.6 或者更高版本，并且很快就会要求升级到 Go 1.7.</p>

<h2 id="快速开始">快速开始</h2>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#8f5902;font-style:italic"># assume the following codes in example.go file</span>
$ cat example.go</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/ping&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pong&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#8f5902;font-style:italic">// listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span></code></pre></div>
<pre><code># run example.go and visit 0.0.0.0:8080/ping on browser
$ go run example.go
</code></pre>

<h2 id="性能测试">性能测试</h2>

<p>Gin 使用自定义版本的 <a href="https://github.com/julienschmidt/httprouter" target="_blank">HttpRouter</a></p>

<p><a href="/BENCHMARKS.md">所有性能测试</a></p>

<table>
<thead>
<tr>
<th>Benchmark name</th>
<th align="right">(1)</th>
<th align="right">(2)</th>
<th align="right">(3)</th>
<th align="right">(4)</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong>BenchmarkGin_GithubAll</strong></td>
<td align="right"><strong>30000</strong></td>
<td align="right"><strong>48375</strong></td>
<td align="right"><strong>0</strong></td>
<td align="right"><strong>0</strong></td>
</tr>

<tr>
<td>BenchmarkAce_GithubAll</td>
<td align="right">10000</td>
<td align="right">134059</td>
<td align="right">13792</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkBear_GithubAll</td>
<td align="right">5000</td>
<td align="right">534445</td>
<td align="right">86448</td>
<td align="right">943</td>
</tr>

<tr>
<td>BenchmarkBeego_GithubAll</td>
<td align="right">3000</td>
<td align="right">592444</td>
<td align="right">74705</td>
<td align="right">812</td>
</tr>

<tr>
<td>BenchmarkBone_GithubAll</td>
<td align="right">200</td>
<td align="right">6957308</td>
<td align="right">698784</td>
<td align="right">8453</td>
</tr>

<tr>
<td>BenchmarkDenco_GithubAll</td>
<td align="right">10000</td>
<td align="right">158819</td>
<td align="right">20224</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkEcho_GithubAll</td>
<td align="right">10000</td>
<td align="right">154700</td>
<td align="right">6496</td>
<td align="right">203</td>
</tr>

<tr>
<td>BenchmarkGocraftWeb_GithubAll</td>
<td align="right">3000</td>
<td align="right">570806</td>
<td align="right">131656</td>
<td align="right">1686</td>
</tr>

<tr>
<td>BenchmarkGoji_GithubAll</td>
<td align="right">2000</td>
<td align="right">818034</td>
<td align="right">56112</td>
<td align="right">334</td>
</tr>

<tr>
<td>BenchmarkGojiv2_GithubAll</td>
<td align="right">2000</td>
<td align="right">1213973</td>
<td align="right">274768</td>
<td align="right">3712</td>
</tr>

<tr>
<td>BenchmarkGoJsonRest_GithubAll</td>
<td align="right">2000</td>
<td align="right">785796</td>
<td align="right">134371</td>
<td align="right">2737</td>
</tr>

<tr>
<td>BenchmarkGoRestful_GithubAll</td>
<td align="right">300</td>
<td align="right">5238188</td>
<td align="right">689672</td>
<td align="right">4519</td>
</tr>

<tr>
<td>BenchmarkGorillaMux_GithubAll</td>
<td align="right">100</td>
<td align="right">10257726</td>
<td align="right">211840</td>
<td align="right">2272</td>
</tr>

<tr>
<td>BenchmarkHttpRouter_GithubAll</td>
<td align="right">20000</td>
<td align="right">105414</td>
<td align="right">13792</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkHttpTreeMux_GithubAll</td>
<td align="right">10000</td>
<td align="right">319934</td>
<td align="right">65856</td>
<td align="right">671</td>
</tr>

<tr>
<td>BenchmarkKocha_GithubAll</td>
<td align="right">10000</td>
<td align="right">209442</td>
<td align="right">23304</td>
<td align="right">843</td>
</tr>

<tr>
<td>BenchmarkLARS_GithubAll</td>
<td align="right">20000</td>
<td align="right">62565</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>

<tr>
<td>BenchmarkMacaron_GithubAll</td>
<td align="right">2000</td>
<td align="right">1161270</td>
<td align="right">204194</td>
<td align="right">2000</td>
</tr>

<tr>
<td>BenchmarkMartini_GithubAll</td>
<td align="right">200</td>
<td align="right">9991713</td>
<td align="right">226549</td>
<td align="right">2325</td>
</tr>

<tr>
<td>BenchmarkPat_GithubAll</td>
<td align="right">200</td>
<td align="right">5590793</td>
<td align="right">1499568</td>
<td align="right">27435</td>
</tr>

<tr>
<td>BenchmarkPossum_GithubAll</td>
<td align="right">10000</td>
<td align="right">319768</td>
<td align="right">84448</td>
<td align="right">609</td>
</tr>

<tr>
<td>BenchmarkR2router_GithubAll</td>
<td align="right">10000</td>
<td align="right">305134</td>
<td align="right">77328</td>
<td align="right">979</td>
</tr>

<tr>
<td>BenchmarkRivet_GithubAll</td>
<td align="right">10000</td>
<td align="right">132134</td>
<td align="right">16272</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkTango_GithubAll</td>
<td align="right">3000</td>
<td align="right">552754</td>
<td align="right">63826</td>
<td align="right">1618</td>
</tr>

<tr>
<td>BenchmarkTigerTonic_GithubAll</td>
<td align="right">1000</td>
<td align="right">1439483</td>
<td align="right">239104</td>
<td align="right">5374</td>
</tr>

<tr>
<td>BenchmarkTraffic_GithubAll</td>
<td align="right">100</td>
<td align="right">11383067</td>
<td align="right">2659329</td>
<td align="right">21848</td>
</tr>

<tr>
<td>BenchmarkVulcan_GithubAll</td>
<td align="right">5000</td>
<td align="right">394253</td>
<td align="right">19894</td>
<td align="right">609</td>
</tr>
</tbody>
</table>

<ul>
<li>(1): 在不断的时间内实现总重复，更高意味着更自信的结果</li>
<li>(2): 单次重复持续时间（ns / op），越低越好</li>
<li>(3): 堆内存（B / op），越低越好</li>
<li>(4): 每次重复的平均分配（allocs / op）越低越好</li>
</ul>

<h2 id="gin-v1-稳定版">Gin v1 稳定版</h2>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> 零分配路由。</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> 仍然是最快的http路由器和框架。</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> 完整的单元测试支持</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> 对战测试</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> API冻结，使用新版本不需要修改原有代码。</label></li>
</ul>

<h2 id="使用-jsoniter-https-github-com-json-iterator-go">使用 <a href="https://github.com/json-iterator/go" target="_blank">jsoniter</a></h2>

<p>Gin默认使用<code>encoding/json</code>解析json数据，但您可以通过<code>go build -tags=</code>更改为使用<a href="https://github.com/json-iterator/go" target="_blank">jsoniter</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go build -tags<span style="color:#ce5c00;font-weight:bold">=</span>jsoniter .</code></pre></div>
<h2 id="api-示例">API 示例</h2>

<h3 id="使用get-post-put-patch-delete-options">使用GET, POST, PUT, PATCH, DELETE , OPTIONS</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#8f5902;font-style:italic">// Disable Console Color
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// gin.DisableConsoleColor()
</span><span style="color:#8f5902;font-style:italic"></span>
	<span style="color:#8f5902;font-style:italic">// Creates a gin router with default middleware:
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// logger and recovery (crash-free) middleware
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someGet&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">getting</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/somePost&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">posting</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PUT</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/somePut&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">putting</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DELETE</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someDelete&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">deleting</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PATCH</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/somePatch&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">patching</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HEAD</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someHead&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">head</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OPTIONS</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someOptions&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">options</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#8f5902;font-style:italic">// By default it serves on :8080 unless a
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// PORT environment variable was defined.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#8f5902;font-style:italic">// router.Run(&#34;:3000&#34;) for a hard coded port
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="获取路由参数">获取路由参数</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// This handler will match /user/john but will not match /user/ or /user
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/user/:name&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Param</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Hello %s&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// However, this one will match /user/john/ and also /user/john/send
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// If no other routers match /user/john, it will redirect to /user/john/
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/user/:name/*action&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Param</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">action</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Param</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;action&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">message</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34; is &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">action</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">message</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="获取url查询参数">获取url查询参数</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Query string parameters are parsed using the existing underlying request object.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// The request responds to a url matching:  /welcome?firstname=Jane&amp;lastname=Doe
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/welcome&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">firstname</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DefaultQuery</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;firstname&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Guest&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">lastname</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Query</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;lastname&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// shortcut for c.Request.URL.Query().Get(&#34;lastname&#34;)
</span><span style="color:#8f5902;font-style:italic"></span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Hello %s %s&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">firstname</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">lastname</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="multipart-urlencoded-表单">Multipart Urlencoded 表单</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/form_post&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">message</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PostForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">nick</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DefaultPostForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;nick&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;anonymous&#34;</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#4e9a06">&#34;posted&#34;</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">message</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#4e9a06">&#34;nick&#34;</span><span style="color:#000;font-weight:bold">:</span>    <span style="color:#000">nick</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="获取post表单数据-url带查询参数">获取post表单数据(url带查询参数)</h3>

<pre><code>POST /post?id=1234&amp;page=1 HTTP/1.1
Content-Type: application/x-www-form-urlencoded

name=manu&amp;message=this_is_great
</code></pre>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/post&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>

		<span style="color:#000">id</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Query</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;id&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">page</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DefaultQuery</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;page&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PostForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">message</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PostForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Printf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;id: %s; page: %s; name: %s; message: %s&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">id</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">page</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">message</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<pre><code>id: 1234; page: 1; name: manu; message: this_is_great
</code></pre>

<h3 id="映射参数-表单参数">映射参数 表单参数</h3>

<pre><code>POST /post?ids[a]=1234&amp;ids[b]=hello HTTP/1.1
Content-Type: application/x-www-form-urlencoded

names[first]=thinkerou&amp;names[second]=tianou
</code></pre>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/post&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>

		<span style="color:#000">ids</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">QueryMap</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ids&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">names</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PostFormMap</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;names&#34;</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Printf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ids: %v; names: %v&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ids</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">names</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<pre><code>ids: map[b:hello a:1234], names: map[second:tianou first:thinkerou]
</code></pre>

<h3 id="上传文件">上传文件</h3>

<h4 id="单个文件上传">单个文件上传</h4>

<p>参考问题<a href="https://github.com/gin-gonic/gin/issues/774" target="_blank">＃774</a>和详细<a href="examples/upload-file/single" target="_blank">示例代码</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#8f5902;font-style:italic">// Set a lower memory limit for multipart forms (default is 32 MiB)
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/upload&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// single file
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">file</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">_</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">FormFile</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;file&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">file</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Filename</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#8f5902;font-style:italic">// Upload the file to specific dst.
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#8f5902;font-style:italic">// c.SaveUploadedFile(file, dst)
</span><span style="color:#8f5902;font-style:italic"></span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Sprintf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;&#39;%s&#39; uploaded!&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">file</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Filename</span><span style="color:#000;font-weight:bold">))</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p><code>curl</code>示例:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -X POST http://localhost:8080/upload <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -F <span style="color:#4e9a06">&#34;file=@/Users/appleboy/test.zip&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -H <span style="color:#4e9a06">&#34;Content-Type: multipart/form-data&#34;</span></code></pre></div>
<h4 id="多文件上传">多文件上传</h4>

<p>查看详细信息<a href="examples/upload-file/multiple" target="_blank">示例代码</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#8f5902;font-style:italic">// Set a lower memory limit for multipart forms (default is 32 MiB)
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/upload&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// Multipart form
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">form</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">_</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">MultipartForm</span><span style="color:#000;font-weight:bold">()</span>
		<span style="color:#000">files</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">File</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;upload[]&#34;</span><span style="color:#000;font-weight:bold">]</span>

		<span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">_</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">file</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#204a87;font-weight:bold">range</span> <span style="color:#000">files</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">file</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Filename</span><span style="color:#000;font-weight:bold">)</span>

			<span style="color:#8f5902;font-style:italic">// Upload the file to specific dst.
</span><span style="color:#8f5902;font-style:italic"></span>			<span style="color:#8f5902;font-style:italic">// c.SaveUploadedFile(file, dst)
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Sprintf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;%d files uploaded!&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87">len</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">files</span><span style="color:#000;font-weight:bold">)))</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p><code>curl</code>示例:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -X POST http://localhost:8080/upload <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -F <span style="color:#4e9a06">&#34;upload[]=@/Users/appleboy/test1.zip&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -F <span style="color:#4e9a06">&#34;upload[]=@/Users/appleboy/test2.zip&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -H <span style="color:#4e9a06">&#34;Content-Type: multipart/form-data&#34;</span></code></pre></div>
<h3 id="路由组">路由组</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Simple group: v1
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">v1</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Group</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/v1&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">v1</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/login&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">loginEndpoint</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">v1</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/submit&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">submitEndpoint</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">v1</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/read&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">readEndpoint</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#8f5902;font-style:italic">// Simple group: v2
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">v2</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Group</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/v2&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">v2</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/login&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">loginEndpoint</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">v2</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/submit&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">submitEndpoint</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">v2</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/read&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">readEndpoint</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="默认初始化-gin">默认初始化 Gin</h3>

<p>用</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">()</span></code></pre></div>
<p>代替</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8f5902;font-style:italic">// Default With the Logger and Recovery middleware already attached
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span></code></pre></div>
<h3 id="使用中间件">使用中间件</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#8f5902;font-style:italic">// Creates a router without any middleware by default
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Global middleware
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// Logger middleware will write the logs to gin.DefaultWriter even if you set with GIN_MODE=release.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// By default gin.DefaultWriter = os.Stdout
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Logger</span><span style="color:#000;font-weight:bold">())</span>

	<span style="color:#8f5902;font-style:italic">// Recovery middleware recovers from any panics and writes a 500 if there was one.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Recovery</span><span style="color:#000;font-weight:bold">())</span>

	<span style="color:#8f5902;font-style:italic">// Per route middleware, you can add as many as you desire.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/benchmark&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">MyBenchLogger</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#000">benchEndpoint</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#8f5902;font-style:italic">// Authorization group
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// authorized := r.Group(&#34;/&#34;, AuthRequired())
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// exactly the same as:
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">authorized</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Group</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#8f5902;font-style:italic">// per group middleware! in this case we use the custom created
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// AuthRequired() middleware just in the &#34;authorized&#34; group.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">authorized</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">AuthRequired</span><span style="color:#000;font-weight:bold">())</span>
	<span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">authorized</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/login&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">loginEndpoint</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">authorized</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/submit&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">submitEndpoint</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">authorized</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/read&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">readEndpoint</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#8f5902;font-style:italic">// nested group
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">testing</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">authorized</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Group</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;testing&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">testing</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/analytics&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">analyticsEndpoint</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="如何记录日志">如何记录日志</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#8f5902;font-style:italic">// Disable Console Color, you don&#39;t need console color when writing the logs to file.
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DisableConsoleColor</span><span style="color:#000;font-weight:bold">()</span>

    <span style="color:#8f5902;font-style:italic">// Logging to a file.
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">f</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">_</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">os</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;gin.log&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DefaultWriter</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">io</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">MultiWriter</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">f</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#8f5902;font-style:italic">// Use the following code if you need to write the logs to file and console at the same time.
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">// gin.DefaultWriter = io.MultiWriter(f, os.Stdout)
</span><span style="color:#8f5902;font-style:italic"></span>
    <span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/ping&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;pong&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">})</span>

    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="模型绑定和验证">模型绑定和验证</h3>

<p>要将请求主体绑定到结构体中，请使用模型绑定。Gin目前支持JSON、XML、YAML和标准表单值的绑定（foo=bar＆boo=baz）。</p>

<p>Gin使用<a href="https://github.com/go-playground/validator" target="_blank">go-playground/validator.v8</a>进行验证。<a href="http://godoc.org/gopkg.in/go-playground/validator.v8#hdr-Baked_In_Validators_and_Tags" target="_blank">完整文档</a>。</p>

<p>使用时，需要在要绑定的所有字段上，设置相应的tag。例如，使用JSON绑定时，字段tag设置为<code>json:&quot;fieldname&quot;</code>。</p>

<p>Gin提供了两类绑定方法：
- <strong>MustBind</strong> -
   - <strong>方法</strong> - <code>Bind</code>, <code>BindJSON</code>, <code>BindXML</code>, <code>BindQuery</code>, <code>BindYAML</code>
   - <strong>说明</strong> - 这些方法属于<code>MustBindWith</code>的具体调用。如果发生绑定错误，则请求终止，并触发<code>c.AbortWithError(400,err).SetType(ErrorTypeBind)</code>。响应状态码被设置为400，<code>Content-Type</code>被设置为<code>text/plain;charset= UTF-8</code>。如果您在此之后尝试设置响应状态码，Gin会输出日志“ <code>[GIN-debug] [WARNING] Headers were already written. Wanted to override status code 400 with 422</code>。如果您希望更好地把控绑定，请考虑使用<code>ShouldBind</code>等效方法。
- <strong>ShouldBind</strong> -
   - <strong>方法</strong> - <code>ShouldBind</code>，<code>ShouldBindJSON</code>，<code>ShouldBindXML</code>，<code>ShouldBindQuery</code>
   - <strong>说明</strong> - 这些方法属于<code>ShouldBindWith</code>的具体调用。如果发生绑定错误，Gin会返回错误。由您处理错误以及请求。</p>

<p>使用Bind方法时，Gin会根据Content-Type尝试推断如何绑定，如果您明确知道，您可以使用 <code>MustBindWith</code> 或 <code>ShouldBindWith</code>。</p>

<p>指定必须绑定的字段，在该字段Tag上加上<code>binding:&quot;required&quot;</code> ，如果绑定时是空值，Gin会报错。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8f5902;font-style:italic">// Binding from JSON
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Login</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">User</span>     <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;user&#34; json:&#34;user&#34; xml:&#34;user&#34;  binding:&#34;required&#34;`</span>
	<span style="color:#000">Password</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;password&#34; json:&#34;password&#34; xml:&#34;password&#34; binding:&#34;required&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Example for binding JSON ({&#34;user&#34;: &#34;manu&#34;, &#34;password&#34;: &#34;123&#34;})
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/loginJSON&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">json</span> <span style="color:#000">Login</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindJSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">json</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusBadRequest</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Error</span><span style="color:#000;font-weight:bold">()})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span>
		
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">json</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">User</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;manu&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">json</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Password</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;123&#34;</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusUnauthorized</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;unauthorized&#34;</span><span style="color:#000;font-weight:bold">})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span> 
		
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;you are logged in&#34;</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Example for binding XML (
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">//	&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">//	&lt;root&gt;
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">//		&lt;user&gt;user&lt;/user&gt;
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">//		&lt;password&gt;123&lt;/user&gt;
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">//	&lt;/root&gt;)
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/loginXML&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">xml</span> <span style="color:#000">Login</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindXML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">xml</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusBadRequest</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Error</span><span style="color:#000;font-weight:bold">()})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span>
		
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">xml</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">User</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;manu&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">xml</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Password</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;123&#34;</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusUnauthorized</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;unauthorized&#34;</span><span style="color:#000;font-weight:bold">})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span> 
		
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;you are logged in&#34;</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Example for binding a HTML form (user=manu&amp;password=123)
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/loginForm&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">form</span> <span style="color:#000">Login</span>
		<span style="color:#8f5902;font-style:italic">// This will infer what binder to use depending on the content-type header.
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusBadRequest</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Error</span><span style="color:#000;font-weight:bold">()})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span>
		
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">User</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;manu&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Password</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;123&#34;</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusUnauthorized</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;unauthorized&#34;</span><span style="color:#000;font-weight:bold">})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span> 
		
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;you are logged in&#34;</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p><strong>测试</strong></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ curl -v -X POST <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  http://localhost:8080/loginJSON <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -H <span style="color:#4e9a06">&#39;content-type: application/json&#39;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -d <span style="color:#4e9a06">&#39;{ &#34;user&#34;: &#34;manu&#34; }&#39;</span>
&gt; POST /loginJSON HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.51.0
&gt; Accept: */*
&gt; content-type: application/json
&gt; Content-Length: <span style="color:#0000cf;font-weight:bold">18</span>
&gt;
* upload completely sent off: <span style="color:#0000cf;font-weight:bold">18</span> out of <span style="color:#0000cf;font-weight:bold">18</span> bytes
&lt; HTTP/1.1 <span style="color:#0000cf;font-weight:bold">400</span> Bad Request
&lt; Content-Type: application/json<span style="color:#000;font-weight:bold">;</span> <span style="color:#000">charset</span><span style="color:#ce5c00;font-weight:bold">=</span>utf-8
&lt; Date: Fri, <span style="color:#0000cf;font-weight:bold">04</span> Aug <span style="color:#0000cf;font-weight:bold">2017</span> <span style="color:#0000cf;font-weight:bold">03</span>:51:31 GMT
&lt; Content-Length: <span style="color:#0000cf;font-weight:bold">100</span>
&lt;
<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;error&#34;</span>:<span style="color:#4e9a06">&#34;Key: &#39;Login.Password&#39; Error:Field validation for &#39;Password&#39; failed on the &#39;required&#39; tag&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span></code></pre></div>
<p><strong>忽略验证</strong></p>

<p>使用<code>curl</code> 命令运行上面的例子时，它返回错误，因为这个例子使用<code>binding:&quot;required&quot;</code> 。 如果使用 <code>binding:&quot;-&quot;</code> ，那么再次运行上面的例子时它不会返回错误。</p>

<h3 id="自定义验证器">自定义验证器</h3>

<p>注册自定义验证器， 请参阅<a href="examples/custom-validation/server.go" target="_blank">示例代码</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;net/http&#34;</span>
	<span style="color:#4e9a06">&#34;reflect&#34;</span>
	<span style="color:#4e9a06">&#34;time&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin/binding&#34;</span>
	<span style="color:#4e9a06">&#34;gopkg.in/go-playground/validator.v8&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#8f5902;font-style:italic">// Booking contains binded and validated data.
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Booking</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">CheckIn</span>  <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Time</span> <span style="color:#4e9a06">`form:&#34;check_in&#34; binding:&#34;required,bookabledate&#34; time_format:&#34;2006-01-02&#34;`</span>
	<span style="color:#000">CheckOut</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Time</span> <span style="color:#4e9a06">`form:&#34;check_out&#34; binding:&#34;required,gtfield=CheckIn&#34; time_format:&#34;2006-01-02&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">bookableDate</span><span style="color:#000;font-weight:bold">(</span>
	<span style="color:#000">v</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">validator</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Validate</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">topStruct</span> <span style="color:#000">reflect</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Value</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">currentStructOrField</span> <span style="color:#000">reflect</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Value</span><span style="color:#000;font-weight:bold">,</span>
	<span style="color:#000">field</span> <span style="color:#000">reflect</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Value</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">fieldType</span> <span style="color:#000">reflect</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Type</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">fieldKind</span> <span style="color:#000">reflect</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Kind</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">param</span> <span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">,</span>
<span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">bool</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">date</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ok</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">field</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Interface</span><span style="color:#000;font-weight:bold">().(</span><span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Time</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">ok</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">today</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Now</span><span style="color:#000;font-weight:bold">()</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">today</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Year</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000">date</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Year</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">today</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">YearDay</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000">date</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">YearDay</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span>
		<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">route</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">v</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ok</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">binding</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Validator</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Engine</span><span style="color:#000;font-weight:bold">().(</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">validator</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Validate</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">ok</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">v</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">RegisterValidation</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;bookabledate&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">bookableDate</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/bookable&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">getBookable</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8085&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">getBookable</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">b</span> <span style="color:#000">Booking</span>
	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindWith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">b</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">binding</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Query</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Booking dates are valid!&#34;</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusBadRequest</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Error</span><span style="color:#000;font-weight:bold">()})</span>
	<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ curl &#34;localhost:8085/bookable?check_in=2018-04-16&amp;check_out=2018-04-17&#34;
{&#34;message&#34;:&#34;Booking dates are valid!&#34;}

$ curl &#34;localhost:8085/bookable?check_in=2018-03-08&amp;check_out=2018-03-09&#34;
{&#34;error&#34;:&#34;Key: &#39;Booking.CheckIn&#39; Error:Field validation for &#39;CheckIn&#39; failed on the &#39;bookabledate&#39; tag&#34;}</code></pre></div>
<p>结构体验证也可以参考<a href="https://github.com/go-playground/validator/releases/tag/v8.7" target="_blank">这种方法</a>注册。
请参阅<a href="examples/struct-lvl-validations" target="_blank">struct-lvl-validation示例</a>以了解更多信息。</p>

<h3 id="只绑定url查询参数">只绑定url查询参数</h3>

<p><code>ShouldBindQuery</code> 函数只绑定url查询参数而不是post字段。 请参阅<a href="https://github.com/gin-gonic/gin/issues/742#issuecomment-315953017" target="_blank">详细信息</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Person</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">Name</span>    <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;name&#34;`</span>
	<span style="color:#000">Address</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;address&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">route</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Any</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/testing&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">startPage</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8085&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">startPage</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">person</span> <span style="color:#000">Person</span>
	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindQuery</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;====== Only Bind By Query String ======&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Name</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Address</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Success&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="url查询参数或表单数据绑定到结构体">url查询参数或表单数据绑定到结构体</h3>

<p>请参阅<a href="https://github.com/gin-gonic/gin/issues/742#issuecomment-264681292" target="_blank">详细信息</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>
	<span style="color:#4e9a06">&#34;time&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Person</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">Name</span>     <span style="color:#204a87;font-weight:bold">string</span>    <span style="color:#4e9a06">`form:&#34;name&#34;`</span>
	<span style="color:#000">Address</span>  <span style="color:#204a87;font-weight:bold">string</span>    <span style="color:#4e9a06">`form:&#34;address&#34;`</span>
	<span style="color:#000">Birthday</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Time</span> <span style="color:#4e9a06">`form:&#34;birthday&#34; time_format:&#34;2006-01-02&#34; time_utc:&#34;1&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">route</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/testing&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">startPage</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8085&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">startPage</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">person</span> <span style="color:#000">Person</span>
	<span style="color:#8f5902;font-style:italic">// If `GET`, only `Form` binding engine (`query`) used.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// If `POST`, first checks the `content-type` for `JSON` or `XML`, then uses `Form` (`form-data`).
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// See more at https://github.com/gin-gonic/gin/blob/master/binding/binding.go#L48
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Name</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Address</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Birthday</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Success&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>测试:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl -X GET <span style="color:#4e9a06">&#34;localhost:8085/testing?name=appleboy&amp;address=xyz&amp;birthday=1992-03-15&#34;</span></code></pre></div>
<h3 id="url路径参数绑定">url路径参数绑定</h3>

<p>查看<a href="https://github.com/gin-gonic/gin/issues/846" target="_blank">详细信息</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Person</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">ID</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`uri:&#34;id&#34; binding:&#34;required,uuid&#34;`</span>
	<span style="color:#000">Name</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`uri:&#34;name&#34; binding:&#34;required&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">route</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/:name/:id&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">person</span> <span style="color:#000">Person</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindUri</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">person</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">400</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;msg&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">})</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;uuid&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">person</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ID</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">route</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8088&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>测试:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl -v localhost:8088/thinkerou/987fbc97-4bed-5078-9f07-9141ba07c9f3
$ curl -v localhost:8088/thinkerou/not-uuid</code></pre></div>
<h3 id="绑定-html-复选框">绑定 HTML 复选框</h3>

<p>参见<a href="https://github.com/gin-gonic/gin/issues/129#issuecomment-124260092" target="_blank">详细信息</a></p>

<p>main.go</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ce5c00;font-weight:bold">...</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">myForm</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">Colors</span> <span style="color:#000;font-weight:bold">[]</span><span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;colors[]&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#ce5c00;font-weight:bold">...</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">formHandler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">fakeForm</span> <span style="color:#000">myForm</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">fakeForm</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;color&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">fakeForm</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Colors</span><span style="color:#000;font-weight:bold">})</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#ce5c00;font-weight:bold">...</span></code></pre></div>
<p>form.html</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">action</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;/&#34;</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;POST&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>Check some colors<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;red&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Red<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;checkbox&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;colors[]&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;red&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;red&#34;</span> <span style="color:#000;font-weight:bold">/&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;green&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Green<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;checkbox&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;colors[]&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;green&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;green&#34;</span> <span style="color:#000;font-weight:bold">/&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;blue&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Blue<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;checkbox&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;colors[]&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;blue&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;blue&#34;</span> <span style="color:#000;font-weight:bold">/&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span> <span style="color:#000;font-weight:bold">/&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span></code></pre></div>
<p>result:</p>

<pre><code>{&quot;color&quot;:[&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;]}
</code></pre>

<h3 id="multipart-urlencoded-绑定">Multipart Urlencoded 绑定</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">LoginForm</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">User</span>     <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;user&#34; binding:&#34;required&#34;`</span>
	<span style="color:#000">Password</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;password&#34; binding:&#34;required&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/login&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// you can bind multipart form with explicit binding declaration:
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#8f5902;font-style:italic">// c.ShouldBindWith(&amp;form, binding.Form)
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#8f5902;font-style:italic">// or you can simply use autobinding with ShouldBind method:
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">form</span> <span style="color:#000">LoginForm</span>
		<span style="color:#8f5902;font-style:italic">// in this case proper binding will be automatically selected
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">User</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;user&#34;</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Password</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;password&#34;</span> <span style="color:#000;font-weight:bold">{</span>
				<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;you are logged in&#34;</span><span style="color:#000;font-weight:bold">})</span>
			<span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
				<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">401</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;unauthorized&#34;</span><span style="color:#000;font-weight:bold">})</span>
			<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>测试:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl -v --form <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">=</span>user --form <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span>password http://localhost:8080/login</code></pre></div>
<h3 id="xml-json-yaml-protobuf-渲染">XML JSON YAML ProtoBuf 渲染</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// gin.H is a shortcut for map[string]interface{}
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someJSON&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;hey&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/moreJSON&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// You also can use a struct
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">msg</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">Name</span>    <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`json:&#34;user&#34;`</span>
			<span style="color:#000">Message</span> <span style="color:#204a87;font-weight:bold">string</span>
			<span style="color:#000">Number</span>  <span style="color:#204a87;font-weight:bold">int</span>
		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000">msg</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Name</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Lena&#34;</span>
		<span style="color:#000">msg</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Message</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;hey&#34;</span>
		<span style="color:#000">msg</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Number</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">123</span>
		<span style="color:#8f5902;font-style:italic">// Note that msg.Name becomes &#34;user&#34; in the JSON
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#8f5902;font-style:italic">// Will output  :   {&#34;user&#34;: &#34;Lena&#34;, &#34;Message&#34;: &#34;hey&#34;, &#34;Number&#34;: 123}
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">msg</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someXML&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">XML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;hey&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someYAML&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">YAML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;hey&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someProtoBuf&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">reps</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">[]</span><span style="color:#204a87;font-weight:bold">int64</span><span style="color:#000;font-weight:bold">{</span><span style="color:#204a87">int64</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#204a87">int64</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">)}</span>
		<span style="color:#000">label</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#4e9a06">&#34;test&#34;</span>
		<span style="color:#8f5902;font-style:italic">// The specific definition of protobuf is written in the testdata/protoexample file.
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">protoexample</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Test</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">Label</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">label</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#000">Reps</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#000">reps</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#8f5902;font-style:italic">// Note that data becomes binary data in the response
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#8f5902;font-style:italic">// Will output protoexample.Test protobuf serialized data
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ProtoBuf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h4 id="securejson">SecureJSON</h4>

<p>使用 SecureJSON 来防止 json 劫持。 如果给定的结构是数组值，则默认预 置<code>“while(1)，”</code> 到响应体。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// You can also use your own secure json prefix
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// r.SecureJsonPrefix(&#34;)]}&#39;,\n&#34;)
</span><span style="color:#8f5902;font-style:italic"></span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someJSON&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">names</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">[]</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;lena&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;austin&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;foo&#34;</span><span style="color:#000;font-weight:bold">}</span>

		<span style="color:#8f5902;font-style:italic">// Will output  :   while(1);[&#34;lena&#34;,&#34;austin&#34;,&#34;foo&#34;]
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SecureJSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">names</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h4 id="jsonp">JSONP</h4>

<p>使用 JSONP 从不同域中的服务器请求数据。 如果查询参数回调存在，则将回调添加到响应正文。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/JSONP?callback=x&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#204a87;font-weight:bold">map</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">]</span><span style="color:#204a87;font-weight:bold">interface</span><span style="color:#000;font-weight:bold">{}{</span>
			<span style="color:#4e9a06">&#34;foo&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">}</span>
		
		<span style="color:#8f5902;font-style:italic">//callback is x
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#8f5902;font-style:italic">// Will output  :   x({\&#34;foo\&#34;:\&#34;bar\&#34;})
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSONP</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h4 id="asciijson">AsciiJSON</h4>

<p>使用 Ascii JSON 生成具有转义的非 ASCII 字符的仅 ASCII JSON。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someJSON&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#204a87;font-weight:bold">map</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">]</span><span style="color:#204a87;font-weight:bold">interface</span><span style="color:#000;font-weight:bold">{}{</span>
			<span style="color:#4e9a06">&#34;lang&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;GO语言&#34;</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#4e9a06">&#34;tag&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#4e9a06">&#34;&lt;br&gt;&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">}</span>

		<span style="color:#8f5902;font-style:italic">// will output : {&#34;lang&#34;:&#34;GO\u8bed\u8a00&#34;,&#34;tag&#34;:&#34;\u003cbr\u003e&#34;}
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">AsciiJSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h4 id="purejson">PureJSON</h4>

<p>通常，JSON使用unicode替换特殊HTML字符，例如 <code>&lt;</code> 变为 <code>\ u003c</code>。 如果要按字面意思对这些字符进行编码，则可以使用 PureJSON。
Go 1.6及更低版本无法使用此功能。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	
	<span style="color:#8f5902;font-style:italic">// Serves unicode entities
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/json&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;html&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;b&gt;Hello, world!&lt;/b&gt;&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	
	<span style="color:#8f5902;font-style:italic">// Serves literal characters
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/purejson&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PureJSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;html&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;b&gt;Hello, world!&lt;/b&gt;&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	
	<span style="color:#8f5902;font-style:italic">// listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#a40000">&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="静态文件服务">静态文件服务</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Static</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/assets&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;./assets&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StaticFS</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/more_static&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Dir</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;my_file_system&#34;</span><span style="color:#000;font-weight:bold">))</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StaticFile</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/favicon.ico&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;./resources/favicon.ico&#34;</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="从-reader-读取数据">从 reader 读取数据</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/someDataFromReader&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">response</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;https://raw.githubusercontent.com/gin-gonic/logo/master/color.png&#34;</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">response</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusCode</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Status</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusServiceUnavailable</span><span style="color:#000;font-weight:bold">)</span>
			<span style="color:#204a87;font-weight:bold">return</span>
		<span style="color:#000;font-weight:bold">}</span>

		<span style="color:#000">reader</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">response</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Body</span>
		<span style="color:#000">contentLength</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">response</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ContentLength</span>
		<span style="color:#000">contentType</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">response</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Header</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Content-Type&#34;</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#000">extraHeaders</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#204a87;font-weight:bold">map</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">]</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;Content-Disposition&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">`attachment; filename=&#34;gopher.png&#34;`</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">}</span>

		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DataFromReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">contentLength</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">contentType</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">extraHeaders</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="html-渲染">HTML 渲染</h3>

<p>使用LoadHTMLGlob()或LoadHTMLFiles()</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadHTMLGlob</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;templates/*&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#8f5902;font-style:italic">//router.LoadHTMLFiles(&#34;templates/template1.html&#34;, &#34;templates/template2.html&#34;)
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/index&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HTML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;index.tmpl&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Main website&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>templates/index.tmpl</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
	<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
		{{ .title }}
	<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span></code></pre></div>
<p>在不同目录中使用具有相同名称的模板</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadHTMLGlob</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;templates/**/*&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/posts/index&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HTML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;posts/index.tmpl&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Posts&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/users/index&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HTML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;users/index.tmpl&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Users&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>templates/posts/index.tmpl</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;posts/index.tmpl&#34; }}
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
	{{ .title }}
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>Using posts/index.tmpl<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
{{ end }}</code></pre></div>
<p>templates/users/index.tmpl</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;users/index.tmpl&#34; }}
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
	{{ .title }}
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>Using users/index.tmpl<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
{{ end }}</code></pre></div>
<h4 id="自定义模板渲染器">自定义模板渲染器</h4>

<p>您还可以使用自己的 html 模板渲染</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#4e9a06">&#34;html/template&#34;</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">html</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Must</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ParseFiles</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;file1&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;file2&#34;</span><span style="color:#000;font-weight:bold">))</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SetHTMLTemplate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">html</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h4 id="自定义分隔符">自定义分隔符</h4>

<p>您可以使用自定义分隔</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Delims</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;{[{&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;}]}&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadHTMLGlob</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/path/to/templates&#34;</span><span style="color:#000;font-weight:bold">)</span></code></pre></div>
<h4 id="自定义模板功能">自定义模板功能</h4>

<p>查看详细信息<a href="examples/template" target="_blank">示例代码</a>。</p>

<p>main.go</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
    <span style="color:#4e9a06">&#34;fmt&#34;</span>
    <span style="color:#4e9a06">&#34;html/template&#34;</span>
    <span style="color:#4e9a06">&#34;net/http&#34;</span>
    <span style="color:#4e9a06">&#34;time&#34;</span>

    <span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">formatAsDate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">t</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Time</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">year</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">month</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">day</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">t</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Date</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Sprintf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;%d%02d/%02d&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">year</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">month</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">day</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Delims</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;{[{&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;}]}&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SetFuncMap</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">FuncMap</span><span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;formatAsDate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">formatAsDate</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">})</span>
    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">LoadHTMLFiles</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;./testdata/template/raw.tmpl&#34;</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/raw&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HTML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;raw.tmpl&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">map</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">]</span><span style="color:#204a87;font-weight:bold">interface</span><span style="color:#000;font-weight:bold">{}{</span>
            <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Date</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2017</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">07</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">01</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">UTC</span><span style="color:#000;font-weight:bold">),</span>
        <span style="color:#000;font-weight:bold">})</span>
    <span style="color:#000;font-weight:bold">})</span>

    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>raw.tmpl</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">日期: {[{.now | formatAsDate}]}</code></pre></div>
<p>结果:</p>

<pre><code>Date: 2017/07/01
</code></pre>

<h3 id="多模板">多模板</h3>

<p>Gin 允许默认只使用一个 html 模板。 检查<a href="https://github.com/gin-contrib/multitemplate" target="_blank">多模板渲染</a>以使用 go 1.6 <code>block template</code> 等功能。</p>

<h3 id="重定向">重定向</h3>

<p>Issuing a HTTP redirect is easy. Both internal and external locations are supported.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/test&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusMovedPermanently</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;http://www.google.com/&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">})</span></code></pre></div>
<p>发出路由器重定向，使用如下的“HandleContext”。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/test&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Request</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">URL</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Path</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;/test2&#34;</span>
    <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HandleContext</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">})</span>
<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/test2&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;hello&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;world&#34;</span><span style="color:#000;font-weight:bold">})</span>
<span style="color:#000;font-weight:bold">})</span></code></pre></div>
<h3 id="自定义中间件">自定义中间件</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">Logger</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HandlerFunc</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">t</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Now</span><span style="color:#000;font-weight:bold">()</span>

		<span style="color:#8f5902;font-style:italic">// Set example variable
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;example&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;12345&#34;</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#8f5902;font-style:italic">// before request
</span><span style="color:#8f5902;font-style:italic"></span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Next</span><span style="color:#000;font-weight:bold">()</span>

		<span style="color:#8f5902;font-style:italic">// after request
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">latency</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Since</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">t</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">latency</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#8f5902;font-style:italic">// access the status we are sending
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Writer</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Status</span><span style="color:#000;font-weight:bold">()</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Logger</span><span style="color:#000;font-weight:bold">())</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/test&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">example</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">MustGet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;example&#34;</span><span style="color:#000;font-weight:bold">).(</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#8f5902;font-style:italic">// it would print: &#34;12345&#34;
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">example</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="basicauth-中间件">BasicAuth() 中间件</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8f5902;font-style:italic">// simulate some private data
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">secrets</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
	<span style="color:#4e9a06">&#34;foo&#34;</span><span style="color:#000;font-weight:bold">:</span>    <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;foo@bar.com&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;phone&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123433&#34;</span><span style="color:#000;font-weight:bold">},</span>
	<span style="color:#4e9a06">&#34;austin&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;austin@example.com&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;phone&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;666&#34;</span><span style="color:#000;font-weight:bold">},</span>
	<span style="color:#4e9a06">&#34;lena&#34;</span><span style="color:#000;font-weight:bold">:</span>   <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;lena@guapa.com&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;phone&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;523443&#34;</span><span style="color:#000;font-weight:bold">},</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Group using gin.BasicAuth() middleware
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// gin.Accounts is a shortcut for map[string]string
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">authorized</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Group</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/admin&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">BasicAuth</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Accounts</span><span style="color:#000;font-weight:bold">{</span>
		<span style="color:#4e9a06">&#34;foo&#34;</span><span style="color:#000;font-weight:bold">:</span>    <span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#4e9a06">&#34;austin&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1234&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#4e9a06">&#34;lena&#34;</span><span style="color:#000;font-weight:bold">:</span>   <span style="color:#4e9a06">&#34;hello2&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#4e9a06">&#34;manu&#34;</span><span style="color:#000;font-weight:bold">:</span>   <span style="color:#4e9a06">&#34;4321&#34;</span><span style="color:#000;font-weight:bold">,</span>
	<span style="color:#000;font-weight:bold">}))</span>

	<span style="color:#8f5902;font-style:italic">// /admin/secrets endpoint
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// hit &#34;localhost:8080/admin/secrets
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">authorized</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/secrets&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// get user, it was set by the BasicAuth middleware
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">user</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">MustGet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">AuthUserKey</span><span style="color:#000;font-weight:bold">).(</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">secret</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ok</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">secrets</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">user</span><span style="color:#000;font-weight:bold">];</span> <span style="color:#000">ok</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;user&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">user</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;secret&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">secret</span><span style="color:#000;font-weight:bold">})</span>
		<span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;user&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">user</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;secret&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NO SECRET :(&#34;</span><span style="color:#000;font-weight:bold">})</span>
		<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="在中间件中使用goroutines">在中间件中使用Goroutines</h3>

<p>当在中间件或handler中启动新的Goroutines时，不能使用原始上下文，必须使用只读副本。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/long_async&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// create copy to be used inside the goroutine
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">cCp</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Copy</span><span style="color:#000;font-weight:bold">()</span>
		<span style="color:#204a87;font-weight:bold">go</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#8f5902;font-style:italic">// simulate a long task with time.Sleep(). 5 seconds
</span><span style="color:#8f5902;font-style:italic"></span>			<span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">)</span>

			<span style="color:#8f5902;font-style:italic">// note that you are using the copied context &#34;cCp&#34;, IMPORTANT
</span><span style="color:#8f5902;font-style:italic"></span>			<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Done! in path &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">cCp</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Request</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">URL</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Path</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000;font-weight:bold">}()</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/long_sync&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// simulate a long task with time.Sleep(). 5 seconds
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">)</span>

		<span style="color:#8f5902;font-style:italic">// since we are NOT using a goroutine, we do not have to copy the context
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Done! in path &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Request</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">URL</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Path</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="自定义-http-配置">自定义 HTTP 配置</h3>

<p>直接使用<code>http.ListenAndServe()</code>，如下所示：</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ListenAndServe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">router</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>or</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">s</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Server</span><span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">Addr</span><span style="color:#000;font-weight:bold">:</span>           <span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">Handler</span><span style="color:#000;font-weight:bold">:</span>        <span style="color:#000">router</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">ReadTimeout</span><span style="color:#000;font-weight:bold">:</span>    <span style="color:#0000cf;font-weight:bold">10</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">WriteTimeout</span><span style="color:#000;font-weight:bold">:</span>   <span style="color:#0000cf;font-weight:bold">10</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">MaxHeaderBytes</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#0000cf;font-weight:bold">20</span><span style="color:#000;font-weight:bold">,</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000">s</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ListenAndServe</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="let-s-encrypt-支持">Let&rsquo;s Encrypt 支持</h3>

<p>一行代码支持 LetsEncrypt HTTPS示例。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/autotls&#34;</span>
	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Ping handler
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/ping&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;pong&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">autotls</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">r</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;example1.com&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;example2.com&#34;</span><span style="color:#000;font-weight:bold">))</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>autocert使用示例。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/autotls&#34;</span>
	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
	<span style="color:#4e9a06">&#34;golang.org/x/crypto/acme/autocert&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#8f5902;font-style:italic">// Ping handler
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/ping&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;pong&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">m</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">autocert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Manager</span><span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">Prompt</span><span style="color:#000;font-weight:bold">:</span>     <span style="color:#000">autocert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">AcceptTOS</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">HostPolicy</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">autocert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HostWhitelist</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;example1.com&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;example2.com&#34;</span><span style="color:#000;font-weight:bold">),</span>
		<span style="color:#000">Cache</span><span style="color:#000;font-weight:bold">:</span>      <span style="color:#000">autocert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DirCache</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/var/www/.cache&#34;</span><span style="color:#000;font-weight:bold">),</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">autotls</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">RunWithManager</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">r</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">m</span><span style="color:#000;font-weight:bold">))</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="使用-gin-运行多个服务">使用 Gin 运行多个服务</h3>

<p>请参阅<a href="https://github.com/gin-gonic/gin/issues/346" target="_blank">问题</a>并尝试以下示例：</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>
	<span style="color:#4e9a06">&#34;net/http&#34;</span>
	<span style="color:#4e9a06">&#34;time&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
	<span style="color:#4e9a06">&#34;golang.org/x/sync/errgroup&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#000">g</span> <span style="color:#000">errgroup</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Group</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">router01</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Handler</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">e</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">e</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Recovery</span><span style="color:#000;font-weight:bold">())</span>
	<span style="color:#000">e</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span>
			<span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
				<span style="color:#4e9a06">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span>
				<span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Welcome server 01&#34;</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#000;font-weight:bold">},</span>
		<span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">e</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">router02</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Handler</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">e</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">e</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Recovery</span><span style="color:#000;font-weight:bold">())</span>
	<span style="color:#000">e</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span>
			<span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
				<span style="color:#4e9a06">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span>
				<span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Welcome server 02&#34;</span><span style="color:#000;font-weight:bold">,</span>
			<span style="color:#000;font-weight:bold">},</span>
		<span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">e</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">server01</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Server</span><span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">Addr</span><span style="color:#000;font-weight:bold">:</span>         <span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">Handler</span><span style="color:#000;font-weight:bold">:</span>      <span style="color:#000">router01</span><span style="color:#000;font-weight:bold">(),</span>
		<span style="color:#000">ReadTimeout</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">WriteTimeout</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">10</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">,</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">server02</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Server</span><span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">Addr</span><span style="color:#000;font-weight:bold">:</span>         <span style="color:#4e9a06">&#34;:8081&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">Handler</span><span style="color:#000;font-weight:bold">:</span>      <span style="color:#000">router02</span><span style="color:#000;font-weight:bold">(),</span>
		<span style="color:#000">ReadTimeout</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">WriteTimeout</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">10</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">,</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">g</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Go</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">error</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">server01</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ListenAndServe</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">g</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Go</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">error</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">server02</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ListenAndServe</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">g</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Wait</span><span style="color:#000;font-weight:bold">();</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="优雅重启或停止">优雅重启或停止</h3>

<p>您想要优雅地重启或停止您的Web服务器吗？
有一些方法可以做到这一点。</p>

<p>我们可以使用<a href="https://github.com/fvbock/endless" target="_blank">fvbock/endless</a>来替换默认的<code>ListenAndServe</code>。 有关更多详细信息，请参阅问题<a href="https://github.com/gin-gonic/gin/issues/296" target="_blank">＃296</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">handler</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#8f5902;font-style:italic">// [...]
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">endless</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ListenAndServe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:4242&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">router</span><span style="color:#000;font-weight:bold">)</span></code></pre></div>
<p>替代方案：</p>

<ul>
<li><a href="https://github.com/braintree/manners" target="_blank">manners</a>：礼貌的Go HTTP服务器，可以正常关闭。</li>
<li><a href="https://github.com/tylerb/graceful" target="_blank">graceful</a>：Graceful是一个Go包，可以正常关闭http.Handler服务器。</li>
<li><a href="https://github.com/facebookgo/grace" target="_blank">grace</a>：Go服务器的平滑重启和零停机时间部署。</li>
</ul>

<p>如果您使用的是Go 1.8，可以考虑使用http.Server的内置<a href="https://golang.org/pkg/net/http/#Server.Shutdown" target="_blank">Shutdown()</a>方法进行正常关机。
请参阅gin的完整<a href="/examples /graceful-shutdown">graceful-shutdown</a>示例。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8f5902;font-style:italic">// +build go1.8
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;context&#34;</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>
	<span style="color:#4e9a06">&#34;net/http&#34;</span>
	<span style="color:#4e9a06">&#34;os&#34;</span>
	<span style="color:#4e9a06">&#34;os/signal&#34;</span>
	<span style="color:#4e9a06">&#34;time&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Welcome Gin Server&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">srv</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Server</span><span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">Addr</span><span style="color:#000;font-weight:bold">:</span>    <span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000">Handler</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">router</span><span style="color:#000;font-weight:bold">,</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#204a87;font-weight:bold">go</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#8f5902;font-style:italic">// service connections
</span><span style="color:#8f5902;font-style:italic"></span>		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">srv</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ListenAndServe</span><span style="color:#000;font-weight:bold">();</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ErrServerClosed</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatalf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;listen: %s\n&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000;font-weight:bold">}()</span>

	<span style="color:#8f5902;font-style:italic">// Wait for interrupt signal to gracefully shutdown the server with
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#8f5902;font-style:italic">// a timeout of 5 seconds.
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">quit</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#204a87">make</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">chan</span> <span style="color:#000">os</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Signal</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">signal</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Notify</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">quit</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">os</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Interrupt</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#ce5c00;font-weight:bold">&lt;-</span><span style="color:#000">quit</span>
	<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Shutdown Server ...&#34;</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#000">ctx</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">cancel</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithTimeout</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Background</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#0000cf;font-weight:bold">5</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">time</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Second</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#204a87;font-weight:bold">defer</span> <span style="color:#000">cancel</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">srv</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Shutdown</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">ctx</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fatal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Server Shutdown:&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Server exiting&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="静态资源嵌入">静态资源嵌入</h3>

<p>使用<a href="https://github.com/jessevdk/go-assets" target="_blank">go-assets</a>将静态资源打包到可执行文件中。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">t</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">loadTemplate</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87">panic</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SetHTMLTemplate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">t</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HTML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;/html/index.tmpl&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">// loadTemplate loads templates embedded by go-assets-builder
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">loadTemplate</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Template</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">error</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">t</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">file</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#204a87;font-weight:bold">range</span> <span style="color:#000">Assets</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Files</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">file</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">IsDir</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000;font-weight:bold">!</span><span style="color:#000">strings</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HasSuffix</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;.tmpl&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#204a87;font-weight:bold">continue</span>
		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000">h</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">ioutil</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ReadAll</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">file</span><span style="color:#000;font-weight:bold">)</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span>
		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000">t</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">t</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Parse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">string</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">h</span><span style="color:#000;font-weight:bold">))</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span>
		<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#000;font-weight:bold">}</span>
	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">t</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">nil</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>请参阅<code>examples/assets-in-binary</code>目录中的完整示例。</p>

<h3 id="表单数据绑定到自定义结构体">表单数据绑定到自定义结构体</h3>

<p>以下示例使用自定义结构体：</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructA</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">FieldA</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;field_a&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructB</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">NestedStruct</span> <span style="color:#000">StructA</span>
    <span style="color:#000">FieldB</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;field_b&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructC</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">NestedStructPointer</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">StructA</span>
    <span style="color:#000">FieldC</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;field_c&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructD</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">NestedAnonyStruct</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">FieldX</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;field_x&#34;`</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000">FieldD</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`form:&#34;field_d&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">GetDataB</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">b</span> <span style="color:#000">StructB</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Bind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">b</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;a&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">b</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NestedStruct</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#34;b&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">b</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">FieldB</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">})</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">GetDataC</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">b</span> <span style="color:#000">StructC</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Bind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">b</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;a&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">b</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NestedStructPointer</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#34;c&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">b</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">FieldC</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">})</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">GetDataD</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">b</span> <span style="color:#000">StructD</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Bind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">b</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;x&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">b</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NestedAnonyStruct</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#34;d&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">b</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">FieldD</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">})</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/getb&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">GetDataB</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/getc&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">GetDataC</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/getd&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">GetDataD</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p><code>curl</code>命令示例：</p>

<pre><code>$ curl &quot;http://localhost:8080/getb?field_a=hello&amp;field_b=world&quot;
{&quot;a&quot;:{&quot;FieldA&quot;:&quot;hello&quot;},&quot;b&quot;:&quot;world&quot;}
$ curl &quot;http://localhost:8080/getc?field_a=hello&amp;field_c=world&quot;
{&quot;a&quot;:{&quot;FieldA&quot;:&quot;hello&quot;},&quot;c&quot;:&quot;world&quot;}
$ curl &quot;http://localhost:8080/getd?field_x=hello&amp;field_d=world&quot;
{&quot;d&quot;:&quot;world&quot;,&quot;x&quot;:{&quot;FieldX&quot;:&quot;hello&quot;}}
</code></pre>

<p><strong>注意</strong>:不支持以下格式结构体：</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructX</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">X</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{}</span> <span style="color:#4e9a06">`form:&#34;name_x&#34;`</span> <span style="color:#8f5902;font-style:italic">// HERE have form
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructY</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">Y</span> <span style="color:#000">StructX</span> <span style="color:#4e9a06">`form:&#34;name_y&#34;`</span> <span style="color:#8f5902;font-style:italic">// HERE have form
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">StructZ</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">Z</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">StructZ</span> <span style="color:#4e9a06">`form:&#34;name_z&#34;`</span> <span style="color:#8f5902;font-style:italic">// HERE have form
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>一句话，现在只支持没有<code>form</code>的嵌套结构体。</p>

<h3 id="将request-body绑定到不同的结构体中">将request body绑定到不同的结构体中</h3>

<p>一般通过调用<code>c.Request.Body</code>方法绑定数据，但不能多次调用这个方法。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">formA</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">Foo</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`json:&#34;foo&#34; xml:&#34;foo&#34; binding:&#34;required&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">formB</span> <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">Bar</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#4e9a06">`json:&#34;bar&#34; xml:&#34;bar&#34; binding:&#34;required&#34;`</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">SomeHandler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">objA</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">formA</span><span style="color:#000;font-weight:bold">{}</span>
  <span style="color:#000">objB</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">formB</span><span style="color:#000;font-weight:bold">{}</span>
  <span style="color:#8f5902;font-style:italic">// This c.ShouldBind consumes c.Request.Body and it cannot be reused.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">errA</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">objA</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">errA</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">`the body should be formA`</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#8f5902;font-style:italic">// Always an error is occurred by this because c.Request.Body is EOF now.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">errB</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">objB</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">errB</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">`the body should be formB`</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>为此，要想多次绑定，需要使用<code>c.ShouldBindBodyWith</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">SomeHandler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">objA</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">formA</span><span style="color:#000;font-weight:bold">{}</span>
  <span style="color:#000">objB</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">formB</span><span style="color:#000;font-weight:bold">{}</span>
  <span style="color:#8f5902;font-style:italic">// This reads c.Request.Body and stores the result into the context.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">errA</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindBodyWith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">objA</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">binding</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">errA</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">`the body should be formA`</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#8f5902;font-style:italic">// At this time, it reuses body stored in the context.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">errB</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindBodyWith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">objB</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">binding</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">errB</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">`the body should be formB JSON`</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#8f5902;font-style:italic">// And it can accepts other formats
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">errB2</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ShouldBindBodyWith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">objB</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">binding</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">XML</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">errB2</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">`the body should be formB XML`</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<ul>
<li><code>c.ShouldBindBodyWith</code>会在绑定之前将body存储到上下文中。 这会对性能造成轻微影响，如果调用一次就能完成绑定的话，那就不要用这个方法。</li>
<li>只有某些格式需要此功能 ，如<code>JSON</code>、<code>XML</code>、<code>MsgPack</code>、<code>ProtoBuf</code>。 对于其他格式，如<code>Query</code>、<code>Form</code>、<code>FormPost</code>、<code>FormMultipart</code>可以多次调用<code>c.ShouldBind()</code>而不会造成任任何性能损失（见<a href="https://github.com/gin-gonic/gin/pull/1341" target="_blank">＃1341</a>）。</li>
</ul>

<h3 id="http2-server-推送">http2 server 推送</h3>

<p>http.Pusher仅支持go1.8 +。 有关详细信息，请参阅<a href="https://blog.golang.org/h2push" target="_blank">golang blog</a>。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;html/template&#34;</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">html</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Must</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">template</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;https&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Parse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">`
</span><span style="color:#4e9a06">&lt;html&gt;
</span><span style="color:#4e9a06">&lt;head&gt;
</span><span style="color:#4e9a06">  &lt;title&gt;Https Test&lt;/title&gt;
</span><span style="color:#4e9a06">  &lt;script src=&#34;/assets/app.js&#34;&gt;&lt;/script&gt;
</span><span style="color:#4e9a06">&lt;/head&gt;
</span><span style="color:#4e9a06">&lt;body&gt;
</span><span style="color:#4e9a06">  &lt;h1 style=&#34;color:red;&#34;&gt;Welcome, Ginner!&lt;/h1&gt;
</span><span style="color:#4e9a06">&lt;/body&gt;
</span><span style="color:#4e9a06">&lt;/html&gt;
</span><span style="color:#4e9a06">`</span><span style="color:#000;font-weight:bold">))</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Static</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/assets&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;./assets&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SetHTMLTemplate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">html</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">pusher</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Writer</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Pusher</span><span style="color:#000;font-weight:bold">();</span> <span style="color:#000">pusher</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
			<span style="color:#8f5902;font-style:italic">// use pusher.Push() to do server push
</span><span style="color:#8f5902;font-style:italic"></span>			<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">pusher</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/assets/app.js&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
				<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Printf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Failed to push: %v&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span><span style="color:#000;font-weight:bold">)</span>
			<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000;font-weight:bold">}</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">HTML</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;https&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">H</span><span style="color:#000;font-weight:bold">{</span>
			<span style="color:#4e9a06">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;success&#34;</span><span style="color:#000;font-weight:bold">,</span>
		<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and Server in https://127.0.0.1:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">RunTLS</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;./testdata/server.pem&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;./testdata/server.key&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="定义路由日志的格式">定义路由日志的格式</h3>

<p>默认的路由日志格式：</p>

<pre><code>[GIN-debug] POST   /foo                      --&gt; main.main.func1 (3 handlers)
[GIN-debug] GET    /bar                      --&gt; main.main.func2 (3 handlers)
[GIN-debug] GET    /status                   --&gt; main.main.func3 (3 handlers)
</code></pre>

<p>如果要以指的格式（例如JSON，Key Values或其他格式）记录信息，则可以使用<code>gin.DebugPrintRouteFunc</code>指定格式。
在下面的示例中，我们使用标准日志包记录所有路由，但您可以使用其他满足需求的日志工具。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;log&#34;</span>
	<span style="color:#4e9a06">&#34;net/http&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DebugPrintRouteFunc</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">httpMethod</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">absolutePath</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">handlerName</span> <span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">nuHandlers</span> <span style="color:#204a87;font-weight:bold">int</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Printf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;endpoint %v %v %v %v\n&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">httpMethod</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">absolutePath</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">handlerName</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">nuHandlers</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">}</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/foo&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;foo&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/bar&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/status&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">JSON</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">StatusOK</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;ok&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>

	<span style="color:#8f5902;font-style:italic">// Listen and Server in http://0.0.0.0:8080
</span><span style="color:#8f5902;font-style:italic"></span>	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h3 id="如何使用cookie">如何使用Cookie</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
    <span style="color:#4e9a06">&#34;fmt&#34;</span>

    <span style="color:#4e9a06">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>

    <span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>

    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/cookie&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>

        <span style="color:#000">cookie</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cookie</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;gin_cookie&#34;</span><span style="color:#000;font-weight:bold">)</span>

        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">err</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#204a87;font-weight:bold">nil</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#000">cookie</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;NotSet&#34;</span>
            <span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SetCookie</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;gin_cookie&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;test&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">3600</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;localhost&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000;font-weight:bold">}</span>

        <span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Printf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Cookie value: %s \n&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">cookie</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">})</span>

    <span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h2 id="测试">测试</h2>

<p>HTTP测试首选<code>net/http/httptest</code>包。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">setupRouter</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Engine</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/ping&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">gin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
		<span style="color:#000">c</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;pong&#34;</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000;font-weight:bold">})</span>
	<span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">r</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">r</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">setupRouter</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">r</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:8080&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<p>上面这段代码的测试用例：</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">main</span>

<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
	<span style="color:#4e9a06">&#34;net/http&#34;</span>
	<span style="color:#4e9a06">&#34;net/http/httptest&#34;</span>
	<span style="color:#4e9a06">&#34;testing&#34;</span>

	<span style="color:#4e9a06">&#34;github.com/stretchr/testify/assert&#34;</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">TestPingRoute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">t</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">testing</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">T</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">router</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">setupRouter</span><span style="color:#000;font-weight:bold">()</span>

	<span style="color:#000">w</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">httptest</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NewRecorder</span><span style="color:#000;font-weight:bold">()</span>
	<span style="color:#000">req</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">_</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">http</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NewRequest</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;GET&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;/ping&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">router</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ServeHTTP</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">w</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">req</span><span style="color:#000;font-weight:bold">)</span>

	<span style="color:#000">assert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Equal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">t</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">w</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Code</span><span style="color:#000;font-weight:bold">)</span>
	<span style="color:#000">assert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Equal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">t</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;pong&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">w</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Body</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">())</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
<h2 id="用户">用户</h2>

<p>使用<a href="https://github.com/gin-gonic/gin" target="_blank">Gin</a>框架的著名项目：</p>

<ul>
<li><a href="https://github.com/drone/drone" target="_blank">drone</a>：用Go编写的基于docker的持续集成平台。</li>
<li><a href="https://github.com/appleboy/gorush" target="_blank">gorush</a>：用Go编写的推送通知服务。</li>
<li><a href="https://github.com/fnproject/fn" target="_blank">fnproject</a>：容器驱动、云无关的无服务器平台。</li>
<li><a href="https://github.com/photoprism/photoprism" target="_blank">photoprism</a>: 用Go编写的基于TensorFlow的个人相册管理系统.</li>
<li><a href="https://github.com/devopsfaith/krakend" target="_blank">krakend</a>: 表现优异的API网关中间件。</li>
</ul>

	
	
		<br />
		<div class="page-blank">

<div id="disqus_thread"></div>
<script>





(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://' + "gin-gonic" + '.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

	
	<div class="text-muted mt-5 pt-3 border-top">Last modified 21.02.2019: <a  href="https://github.com/gin-gonic/website/commit/d84712434c7d42b0a4b49ad4320432e19bbe73dc">add zh-tw and rename cn to zh-cn (#43) (d847124)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none" style="min-height:60px;padding-top:1rem !important">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter">
    <a class="text-white" target="_blank" href="https://gitter.im/gin-gonic/gin">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/gin-gonic/gin">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2019 Gin Team All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>





<script src="/js/main.min.3bf219f876522fd3da95f26cf5b58461f5289b2926b46ee10e55182e557a8855.js" integrity="sha256-O/IZ&#43;HZSL9PalfJs9bWEYfUomykmtG7hDlUYLlV6iFU="></script>




    
<script>
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://www.googletagmanager.com/gtag/js?id=' + "UA-42425385-2";
s.setAttribute('async', '');
(d.head || d.body).appendChild(s);
})();
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', "UA-42425385-2");
</script>




  </body>
</html>